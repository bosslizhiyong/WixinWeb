# 微信商场项目

========================================  商城 页面 部分的  ========================================

## 商城首页API

### 功能说明：
>  获取首页需要展示的内容

### 请求方式：
> POST
### 请求地址：
> {api}/Mall/Index
### 请求参数说明：
```
{
    "Token": "123456abc"        //用户的登录令牌
}
```

### 返回数据
```
{
  "code": 200,
  "msg": "",
  "data": {
      Advents:[ {滑动广告实体}, {滑动广告实体} ],   //滑动广告数据
      Products:[ {商品实体}, {商品实体} ],       //普通商品数据
      NewProducts:[ {商品实体}, {商品实体} ],    //新品商品数据
      PromoProducts:[ {商品实体}, {商品实体} ],  //促销商品数据
      Suppliers:[ {供应商实体}, {供应商实体} ]   //供应商的数据
  }
}
```
### 返回数据说明
```
商品实体分为 普通、新品、促销三类


code: 处理成功 200，   处理失败 400

msg:  处理的结果

data: 

Advent:{        //滑动广告数据
    Id:1,           //序号
    CoverImg:'',    //封面图
    Url:''          //暂时没用
}

Product:{                   //普通商品数据
    Id: '123456789abc',         //序号
    OpenId:'',                  //ERP中该商品的ID
    CoverImg:'http://w.y.com/img.jpg',  //封面图
    Title: '',                  //商品的标题
    SupplierId: '',             //供应商编号
    Price: 0.0,                 //价格可以为空, 数字类型
    BarCode:'6916164783121',    //商品的条码
    CreateOn:'2017-1-5',        //创建日期
    Status: 0,                  //状态
    Description:'{ "brand":"品牌特美刻", "other":"规格：10x50 黑色、蓝色、白色、0.52KG" }'    //商品的描述
    IsNew: false,
    IsPromo: false,
}

NewProduct:{                //新品商品数据
    Id: '123456789abc',         //序号
    OpenId:'',                  //ERP中该商品的ID
    CoverImg:'http://w.y.com/img.jpg',  //封面图
    Title: '',                  //商品的标题
    SupplierId: '',             //供应商编号
    Price: 0.0,                 //价格可以为空, 数字类型
    BarCode:'6916164783121',    //商品的条码
    CreateOn:'2017-1-5',        //创建日期
    Status: 0,                  //状态
    Description:'{ "brand":"品牌特美刻", "other":"规格：10x50 黑色、蓝色、白色、0.52KG" }',    //商品的描述
    IsNew: true,                //是否新品
    IsPromo: flase              //是否促销
}

PromoProduct:{              //促销商品数据
    Id: '123456789abc',         //序号
    OpenId:'',                  //ERP中该商品的ID
    CoverImg:'http://w.y.com/img.jpg',  //封面图
    Title: '',                  //商品的标题
    SupplierId: '',             //供应商编号
    Price: 0.0,                 //价格可以为空, 数字类型
    BarCode:'6916164783121',    //商品的条码
    CreateOn:'2017-1-5',        //创建日期
    Status: 0,                  //状态
    Description:'{ "brand":"品牌特美刻", "other":"规格：10x50 黑色、蓝色、白色、0.52KG" }',    //商品的描述
    IsNew: false,               //是否新品
    IsPromo: true,              //是否促销,
    Promos:{
        ExpireOn: 123456789,    //日期 长整形 促销的结束时间, 为了方便统计剩余天数返回可反序列的日期
        PromoPrice: 0.0         //促销价格
    }
}

Supplier:{                  //供应商的数据
    Id: '123456',                 //6位的企业编号
    Name:'企业名称',               //企业的名称长度根据ERP的来
    CoverImg: 'http://w.y.com/img.jpg',     //企业的商标LOGO
    Address: '企业的地址',         //企业的地址
    Phone: '020-11111',           //企业的联系电话
    Status: 1,                    //企业数据可用状态
}
```

=================================================================================


## 商品列表页

### 功能说明：
>  获取商品列表内容

### 请求方式：
> POST
### 请求地址：
> {app}/Product/List
### 请求参数说明：
```
{
    Token: '123456abc',         //用户的登录令牌
    Key: '商品标题',             //搜索的关键字  可为空 可不传
    Bar: '12345677',            //搜索的条形码商品的条码  可为空 可不传
    Sid: '',                    //供应商的编号 可为空 可不传 搜索指定供应商的商品
    Kind: 1,                    //搜索的类型, 可为空 可不传 默认是0  0 是全部商品，   1 是普通商品， 2 是新品， 3 是促销品
    IsFav: 1,                   //是否只搜索我关注的商品 可为空 可不传 默认是0   0 是显示全部商品， 1 是只显示我的关注
    Page:1,                     //当前页数 可为空 可不传 默认是1
    Take:10,                    //每页获取多少个数据 可为空 可不传 默认是10
}
```

### 返回数据
```
{
  "code": 200,
  "msg": "",
  "data": [ {商品实体}, {商品实体} ]
}
```
### 返回数据说明
```
code: 处理成功 200， 处理成功但没有数据 201,  处理失败 400, 
msg:  处理结果的文字说明
data: 返回的结果，商品数据的集合具体请看商品数据的解释
```

=================================================================================


## 商品详情页

### 功能说明：
>  获取单个商品的详细详情内容
### 请求方式：
> POST
### 请求地址：
> {app}/Product/Info/{id}
### 请求参数说明：
```
{id} 是商品的 序号通过商品列表可以获得商品的序号
{
    Token: '123456abc',         //用户的登录令牌
}
```

### 返回数据
```
{
  "code": 200,
  "msg": "",
  "data": {
      Product:{商品实体},
      ProductImgs:[
          {
              Id: '12345678',       //序号
              Url: '图片的URL地址',  //商品的
              Sort: 1               //图片排序
          } 
      ],
      IsFav: true,                      //是否已经关注了此商品， true 是关注了， false 是没关注
      Supplier:{ 供应商实体 },
      CrossSale:[{商品实体}]
  }
}
```
### 返回数据说明
```
code: 处理成功 200，  处理失败 400, 
msg:  处理结果的文字说明
data: 返回的结果
```

=================================================================================


## 供应商列表页

### 功能说明：
>  获取供应商列表内容

### 请求方式：
> POST
### 请求地址：
> {app}/Supplier/List
### 请求参数说明：
```
{
    Token: '123456abc',         //用户的登录令牌
    Key: '供应商标题',           //搜索的关键字  可为空 可不传
    IsFav: 1,                   //是否只搜索我关注的商品 可为空 可不传 默认是0   0 是显示全部商品， 1 是只显示我的关注
    Page:1,                     //当前页数 可为空 可不传 默认是1
    Take:10,                    //每页获取多少个数据 可为空 可不传 默认是10
}
```

### 返回数据
```
{
  "code": 200,
  "msg": "",
  "data": [ {供应商实体}, {供应商实体} ]
}
```
### 返回数据说明
```
code: 处理成功 200， 处理成功但没有数据 201,  处理失败 400, 
msg:  处理结果的文字说明
data: 返回的结果
```

=================================================================================


## 供应商详情页

### 功能说明：
>  获取供应商详情内容
### 请求方式：
> POST
### 请求地址：
> {app}/Supplier/Info/{id}
### 请求参数说明：
```
{id} 是供应商的企业编号
{
    Token: '123456abc',         //用户的登录令牌
}
```

### 返回数据
```
{
  "code": 200,
  "msg": "",
  "data": {
      Supplier:{供应商实体},                         //供应商的实体
      IsFav: true,                                  //是否已经关注了此供应商， true 是关注了， false 是没关注
      Detail: '{
          "Desc":'',                        //公司介绍(暂定)
          "Content":''                      //联系方式(暂定)
      }',                                   //供应商的 商家信息
      DefaultProduct:[ {商品实体}, {商品实体} ]      //默认第一页中的全部商品数据
  }
}
```
### 返回数据说明
```
code: 处理成功 200，  处理失败 400, 
msg:  处理结果的文字说明
data: 返回的结果
```

========================================  商城 业务 部分的  ========================================



Promos:{
    Id: '',      //主键
    Pid: '',     //商品的OPENID
    Sid:'',      //供应商ID
    BeginOn: 123456789,     //开始时间
    ExpireOn: 123456789,    //日期 长整形 促销的结束时间, 为了方便统计剩余天数返回可反序列的日期
    PromoPrice: 0.0         //促销价格
    IsPublic: false,        //是否公开的活动
    Range:'手机号码,手机号码' //非公开时，能收到这条活动的人的手机号码
    }